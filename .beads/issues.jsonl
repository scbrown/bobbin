{"id":"bobbin-07d","title":"Phase 1: Foundation (MVP)","description":"Basic indexing and search working end-to-end. Exit criteria: Can index a medium repo and run semantic + keyword search.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T15:32:05.697013-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:05.697013-05:00"}
{"id":"bobbin-7nl","title":"Implement tambour daemon","description":"Background process for health monitoring and event dispatch.\n\n## Requirements\n- Daemonize with PID file (~/.tambour/daemon.pid or .tambour/daemon.pid)\n- Periodic health checks (configurable interval, default 60s)\n- Graceful shutdown on SIGTERM/SIGINT\n- Logging to file with rotation\n\n## CLI Commands\n```bash\ntambour daemon start    # Start daemon (or: python -m tambour.daemon start)\ntambour daemon stop     # Stop daemon\ntambour daemon status   # Show if running, PID, uptime\n```\n\n## Health Check Loop\n1. Find all in_progress issues (bd list --status in_progress --json)\n2. For each, check if worktree exists and agent process running\n3. If zombie detected, emit health.zombie event\n4. If auto_recover=true in config, unclaim automatically\n\n## Language\nPython (signal handling, subprocess, basic daemon pattern)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:35:18.283318-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:15.034297-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-7nl","depends_on_id":"bobbin-sev","type":"blocks","created_at":"2026-01-02T18:36:00.8795-05:00","created_by":"stiwi"},{"issue_id":"bobbin-7nl","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.876409-05:00","created_by":"stiwi"}]}
{"id":"bobbin-7o5","title":"Tree-sitter code parsing integration","description":"Integrate Tree-sitter for structural code parsing. Support Rust, TypeScript, and Python initially. Extract semantic chunks: functions, classes, modules, interfaces. Gracefully handle parse errors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:36.059928-05:00","created_by":"stiwi","updated_at":"2026-01-02T16:18:58.658045-05:00","closed_at":"2026-01-02T16:18:58.658045-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bobbin-7o5","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:05.829449-05:00","created_by":"stiwi"},{"issue_id":"bobbin-7o5","depends_on_id":"bobbin-lqq","type":"blocks","created_at":"2026-01-02T15:33:23.435145-05:00","created_by":"stiwi"}]}
{"id":"bobbin-8h0","title":"ONNX embedding generation with all-MiniLM-L6-v2","description":"Integrate ort (ONNX Runtime) for local embedding generation. Bundle or download all-MiniLM-L6-v2 model. Generate 384-dim embeddings for code chunks. Support batched inference for performance.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:36.22197-05:00","created_by":"stiwi","updated_at":"2026-01-02T16:12:59.913618-05:00","closed_at":"2026-01-02T16:12:59.913621-05:00","dependencies":[{"issue_id":"bobbin-8h0","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:05.867192-05:00","created_by":"stiwi"},{"issue_id":"bobbin-8h0","depends_on_id":"bobbin-lqq","type":"blocks","created_at":"2026-01-02T15:33:23.474597-05:00","created_by":"stiwi"}]}
{"id":"bobbin-8wk","title":"Fix finish-agent.sh to force-remove worktrees after successful merge","description":"The finish-agent.sh script fails completely when removing worktrees that have uncommitted changes or unpushed commits, even after a successful merge. Because of 'set -e', the script exits before closing the issue or cleaning up the branch.\n\nThe script should:\n1. Attempt worktree removal without --force\n2. If removal fails, warn the user but continue with remaining cleanup (branch deletion, issue closing)\n3. Print a clear message that the worktree needs manual investigation\n4. Optionally list what's left in the worktree (uncommitted files, unpushed commits)\n\nThis ensures the issue gets closed and branch gets cleaned up, while alerting the user to investigate the stale worktree.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:49:06.931598-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:51:11.217546-05:00","labels":["tambour"]}
{"id":"bobbin-9k5","title":"JSON output format support","description":"Add --json flag to all commands. Output structured JSON for programmatic consumption by AI agents. Include all relevant metadata in JSON responses.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T15:32:37.557847-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:37.557847-05:00","dependencies":[{"issue_id":"bobbin-9k5","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:06.211044-05:00","created_by":"stiwi"},{"issue_id":"bobbin-9k5","depends_on_id":"bobbin-xhd","type":"blocks","created_at":"2026-01-02T15:33:28.66344-05:00","created_by":"stiwi"},{"issue_id":"bobbin-9k5","depends_on_id":"bobbin-x67","type":"blocks","created_at":"2026-01-02T15:33:28.703069-05:00","created_by":"stiwi"}]}
{"id":"bobbin-ac2","title":"Implement plugin configuration parser","description":"Parse .tambour/config.toml for plugin definitions.\n\n## Requirements\n- Parse [plugins.*] sections from config\n- Validate required fields: on, run\n- Handle optional fields: blocking (default false), timeout (default 30), enabled (default true)\n- Error on invalid event names\n- Return structured plugin definitions for event dispatcher\n\n## Config Schema\n```toml\n[plugins.example]\non = \"branch.merged\"\nrun = \"bobbin index\"\nblocking = false\ntimeout = 60\nenabled = true\n```\n\n## Language\nPython (tomllib for parsing)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:34:49.118677-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:25.484479-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-ac2","depends_on_id":"bobbin-uzr","type":"blocks","created_at":"2026-01-02T18:36:00.748397-05:00","created_by":"stiwi"},{"issue_id":"bobbin-ac2","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.750542-05:00","created_by":"stiwi"}]}
{"id":"bobbin-apx","title":"CLI: bobbin init command","description":"Implement 'bobbin init' command. Create .bobbin/ directory structure. Generate default config.toml. Initialize empty SQLite database and LanceDB store. Detect and respect .gitignore.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:36.778304-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:36.778304-05:00","dependencies":[{"issue_id":"bobbin-apx","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:06.050365-05:00","created_by":"stiwi"},{"issue_id":"bobbin-apx","depends_on_id":"bobbin-j0x","type":"blocks","created_at":"2026-01-02T15:33:25.217588-05:00","created_by":"stiwi"},{"issue_id":"bobbin-apx","depends_on_id":"bobbin-cj1","type":"blocks","created_at":"2026-01-02T15:33:25.258362-05:00","created_by":"stiwi"}]}
{"id":"bobbin-cg3","title":"Add agent heartbeat mechanism","description":"Agents write periodic heartbeats for liveness detection.\n\n## Problem\nCurrent zombie detection only checks if a Claude process is running. This fails if:\n- Agent is stuck/hung but process exists\n- Process detection is unreliable (PID reuse, etc.)\n\n## Solution\nAgents write a heartbeat file that the daemon monitors.\n\n## Implementation\n1. On agent spawn, create: `\u003cworktree\u003e/.tambour/heartbeat`\n2. Agent (or wrapper) updates timestamp periodically (every 30s)\n3. Daemon checks heartbeat age vs zombie_threshold config\n4. Stale heartbeat = zombie, even if process exists\n\n## Heartbeat File Format\n```json\n{\"timestamp\": \"2024-01-15T10:30:00Z\", \"pid\": 12345}\n```\n\n## Configuration\n```toml\n[daemon]\nzombie_threshold = 300  # seconds without heartbeat = zombie\n```","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T18:35:29.517648-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:15.117324-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-cg3","depends_on_id":"bobbin-7nl","type":"blocks","created_at":"2026-01-02T18:36:00.964547-05:00","created_by":"stiwi"},{"issue_id":"bobbin-cg3","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.962823-05:00","created_by":"stiwi"}]}
{"id":"bobbin-cj1","title":"SQLite metadata and FTS storage","description":"Set up SQLite database for metadata. Create tables: files, chunks, chunks_fts. Implement full-text search using FTS5. Track file hashes and modification times for incremental updates.","status":"closed","priority":1,"issue_type":"task","assignee":"stiwi","created_at":"2026-01-02T15:32:36.590518-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:22:47.410737-05:00","closed_at":"2026-01-02T18:22:47.410737-05:00","close_reason":"Implemented SQLite metadata store with FTS5, incremental update tracking, batch operations, and comprehensive tests","dependencies":[{"issue_id":"bobbin-cj1","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:05.943015-05:00","created_by":"stiwi"},{"issue_id":"bobbin-cj1","depends_on_id":"bobbin-lqq","type":"blocks","created_at":"2026-01-02T15:33:23.552297-05:00","created_by":"stiwi"}]}
{"id":"bobbin-ec0","title":"Add event emission points to shell scripts","description":"Integrate event emission into existing Phase 1 shell scripts.\n\n## Events to Emit\n| Script | Event | Trigger Point |\n|--------|-------|---------------|\n| start-agent.sh | agent.spawned | After worktree created, before Claude starts |\n| start-agent.sh | task.claimed | After bd update --claim succeeds |\n| finish-agent.sh | branch.merged | After successful git merge |\n| finish-agent.sh | task.completed | After bd close succeeds |\n| health-check.sh | health.zombie | When zombie detected |\n\n## Implementation\n- Call Python event dispatcher from shell scripts\n- Pass required payload data as arguments\n- For agent.finished: capture Claude exit code, emit after Claude exits\n\n## Approach\nMinimal shell wrapper that calls: `python -m tambour.events emit \u003cevent\u003e --issue \u003cid\u003e ...`","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:35:08.356973-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:14.993574-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-ec0","depends_on_id":"bobbin-sev","type":"blocks","created_at":"2026-01-02T18:36:00.836743-05:00","created_by":"stiwi"},{"issue_id":"bobbin-ec0","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.834144-05:00","created_by":"stiwi"}]}
{"id":"bobbin-goe","title":"CLI: bobbin index command","description":"Implement 'bobbin index' command. Walk repository files respecting ignores. Parse files with Tree-sitter. Generate embeddings. Store in LanceDB and SQLite. Show progress during indexing.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:36.971009-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:36.971009-05:00","dependencies":[{"issue_id":"bobbin-goe","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:06.089719-05:00","created_by":"stiwi"},{"issue_id":"bobbin-goe","depends_on_id":"bobbin-7o5","type":"blocks","created_at":"2026-01-02T15:33:26.798448-05:00","created_by":"stiwi"},{"issue_id":"bobbin-goe","depends_on_id":"bobbin-8h0","type":"blocks","created_at":"2026-01-02T15:33:26.838815-05:00","created_by":"stiwi"},{"issue_id":"bobbin-goe","depends_on_id":"bobbin-j0x","type":"blocks","created_at":"2026-01-02T15:33:26.87838-05:00","created_by":"stiwi"},{"issue_id":"bobbin-goe","depends_on_id":"bobbin-cj1","type":"blocks","created_at":"2026-01-02T15:33:26.918483-05:00","created_by":"stiwi"},{"issue_id":"bobbin-goe","depends_on_id":"bobbin-apx","type":"blocks","created_at":"2026-01-02T15:33:26.957254-05:00","created_by":"stiwi"}]}
{"id":"bobbin-iac","title":"Phase 2: The Needle - Plugin System \u0026 Daemon","description":"Implement event-driven plugin system and daemon for continuous operation.\n\nSee tambour/vision.md and tambour/prd.md for full context.\n\n## Goals\n- Event-driven plugin system via .tambour/config.toml\n- Background daemon for health monitoring and event dispatch\n- Improved health monitoring with heartbeats and auto-recovery\n\n## Success Criteria\n- Plugins execute on all defined events\n- Blocking plugins can gate workflow progression\n- Daemon runs reliably in background\n- At least one real plugin (bobbin refresh) works end-to-end","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-02T18:34:40.046872-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:14.82685-05:00","labels":["tambour"]}
{"id":"bobbin-j0x","title":"LanceDB vector storage integration","description":"Integrate LanceDB as embedded vector store. Store embeddings with metadata (file path, chunk name, line numbers). Implement approximate nearest neighbor search. Store in .bobbin/ directory.","status":"closed","priority":1,"issue_type":"task","assignee":"stiwi","created_at":"2026-01-02T15:32:36.402394-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:47:47.273701-05:00","closed_at":"2026-01-02T18:47:47.273701-05:00","close_reason":"Implemented LanceDB vector storage with ANN search, metadata storage, and batch operations","dependencies":[{"issue_id":"bobbin-j0x","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:05.90367-05:00","created_by":"stiwi"},{"issue_id":"bobbin-j0x","depends_on_id":"bobbin-lqq","type":"blocks","created_at":"2026-01-02T15:33:23.513955-05:00","created_by":"stiwi"}]}
{"id":"bobbin-lqq","title":"Project scaffolding: Rust workspace and dependencies","description":"Set up Rust workspace with Cargo.toml, configure dependencies: tree-sitter, lancedb, rusqlite, ort (ONNX runtime), clap (CLI), serde. Create initial module structure.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:35.902466-05:00","created_by":"stiwi","updated_at":"2026-01-02T16:00:50.229618-05:00","closed_at":"2026-01-02T16:00:50.229618-05:00","close_reason":"Completed: Rust workspace with Cargo.toml, all dependencies configured, module structure created (cli/, index/, search/, storage/), project compiles successfully","dependencies":[{"issue_id":"bobbin-lqq","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:05.79028-05:00","created_by":"stiwi"}]}
{"id":"bobbin-sev","title":"Implement event dispatcher for plugins","description":"Execute plugins when lifecycle events are emitted.\n\n## Requirements\n- Accept event type and payload\n- Find all plugins registered for that event\n- Execute plugins with payload as environment variables\n- Handle blocking vs non-blocking:\n  - blocking=true: wait for completion, fail workflow if non-zero exit\n  - blocking=false: fire-and-forget (log result async)\n- Respect timeout configuration\n- Log all plugin executions and results\n\n## Environment Variables (payload)\n```bash\nTAMBOUR_EVENT=\"branch.merged\"\nTAMBOUR_TIMESTAMP=\"2024-01-15T10:30:00Z\"\nTAMBOUR_ISSUE_ID=\"proj-a1b\"\nTAMBOUR_ISSUE_TITLE=\"Add user authentication\"\nTAMBOUR_BRANCH=\"proj-a1b\"\nTAMBOUR_WORKTREE=\"/path/to/worktree\"\nTAMBOUR_MAIN_REPO=\"/path/to/main\"\n# Plus event-specific vars\n```\n\n## Language\nPython (subprocess for execution)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:34:58.730357-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:14.951756-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-sev","depends_on_id":"bobbin-ac2","type":"blocks","created_at":"2026-01-02T18:36:00.793422-05:00","created_by":"stiwi"},{"issue_id":"bobbin-sev","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.792858-05:00","created_by":"stiwi"}]}
{"id":"bobbin-uzr","title":"Set up tambour Python package structure","description":"Create the Python package foundation for Phase 2.\n\n## Directory Structure\n```\ntambour/\n├── vision.md\n├── prd.md\n└── src/\n    └── tambour/\n        ├── __init__.py\n        ├── __main__.py      # CLI entry point\n        ├── config.py        # Config parsing\n        ├── events.py        # Event types and dispatcher\n        ├── daemon.py        # Daemon implementation\n        └── health.py        # Health check logic\n```\n\n## Requirements\n- Python 3.11+ (for tomllib)\n- No external dependencies initially (stdlib only)\n- CLI via argparse or click\n- Entry point: `python -m tambour \u003ccommand\u003e`\n\n## Commands (stubs)\n```bash\npython -m tambour events emit \u003cevent\u003e [--issue ID] [--worktree PATH]\npython -m tambour daemon start|stop|status\npython -m tambour config validate\n```","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:35:48.561135-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:42:47.063087-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-uzr","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.702709-05:00","created_by":"stiwi"}]}
{"id":"bobbin-x67","title":"CLI: bobbin grep command (keyword)","description":"Implement 'bobbin grep \u003cpattern\u003e' command. Search SQLite FTS for keyword matches. Support regex patterns. Return matching chunks with context. Support case-sensitive and insensitive modes.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:37.36164-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:37.36164-05:00","dependencies":[{"issue_id":"bobbin-x67","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:06.172343-05:00","created_by":"stiwi"},{"issue_id":"bobbin-x67","depends_on_id":"bobbin-goe","type":"blocks","created_at":"2026-01-02T15:33:28.623936-05:00","created_by":"stiwi"}]}
{"id":"bobbin-xhd","title":"CLI: bobbin search command (semantic)","description":"Implement 'bobbin search \u003cquery\u003e' command. Embed query text. Search LanceDB for similar vectors. Return top-k results with file path, chunk name, line numbers, similarity score. Support --limit and --type flags.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T15:32:37.166319-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:32:37.166319-05:00","dependencies":[{"issue_id":"bobbin-xhd","depends_on_id":"bobbin-07d","type":"parent-child","created_at":"2026-01-02T15:33:06.132986-05:00","created_by":"stiwi"},{"issue_id":"bobbin-xhd","depends_on_id":"bobbin-goe","type":"blocks","created_at":"2026-01-02T15:33:28.58375-05:00","created_by":"stiwi"}]}
{"id":"bobbin-ysn","title":"Create bobbin index refresh plugin","description":"Reference implementation: refresh bobbin index after merges.\n\n## Purpose\nWhen agent work is merged to main, the bobbin index becomes stale. This plugin refreshes it automatically.\n\n## Configuration\n```toml\n[plugins.refresh-bobbin]\non = \"branch.merged\"\nrun = \"bobbin index --incremental\"\nblocking = false\ntimeout = 120\n```\n\n## Behavior\n- Triggered after finish-agent.sh merges branch to main\n- Runs bobbin index in the main repo (not worktree)\n- Non-blocking: merge completes immediately, index refreshes in background\n- Logs result but doesn't fail the workflow\n\n## Validates\n- Plugin system works end-to-end\n- Non-blocking execution works correctly\n- Environment variables provide correct paths","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:35:38.845751-05:00","created_by":"stiwi","updated_at":"2026-01-02T18:36:15.076101-05:00","labels":["tambour"],"dependencies":[{"issue_id":"bobbin-ysn","depends_on_id":"bobbin-ec0","type":"blocks","created_at":"2026-01-02T18:36:00.921625-05:00","created_by":"stiwi"},{"issue_id":"bobbin-ysn","depends_on_id":"bobbin-iac","type":"parent-child","created_at":"2026-01-02T18:36:08.918536-05:00","created_by":"stiwi"}]}
{"id":"bobbin-yxf","title":"Create Bobbin Project Vision and PRD","description":"Review 'Local RAG and Context Injection.md' and discuss what the primary features of bobbin will be. Create a vision/mission document and full PRD.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T14:58:32.026786-05:00","created_by":"stiwi","updated_at":"2026-01-02T15:31:37.629985-05:00","closed_at":"2026-01-02T15:31:37.629985-05:00","close_reason":"Created VISION.md and PRD.md with full project scope, architecture, and phased roadmap"}
