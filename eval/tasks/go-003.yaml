id: go-003
repo: golang/go
commit: 8e3104dc269b959083f7e7133841e3366a477ef1
description: |
  Fix debug/elf.NewFile to return *FormatError instead of a raw io.EOF when
  reading short or empty ELF files. The function reads a 16-byte ELF
  identifier via ReadAt, but returns the raw error from ReadAt on failure
  (typically io.EOF for empty files). This breaks the API contract that all
  parsing failures return *FormatError. Wrap the error by replacing the bare
  `return nil, err` with `return nil, &FormatError{0, "cannot read ELF
  identifier", err}` in file.go, matching the pattern used by all other
  error paths in NewFile.
test_command: "cd src && go test debug/elf -run TestOpenEmptyFile -count=1"
language: go
difficulty: easy
tags: [bug-fix, debug, elf, error-handling, api-contract]
